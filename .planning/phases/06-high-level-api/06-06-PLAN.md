---
phase: 06-high-level-api
plan: 06
type: execute
wave: 1
depends_on: ["06-01", "06-02", "06-03", "06-04", "06-05"]
files_modified:
  - CMakeLists.txt
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Library consumer can include #include <mcpp/api/context.h>"
    - "api/context.h is installed with other public headers"
  artifacts:
    - path: "CMakeLists.txt"
      provides: "Build configuration with all Phase 6 API headers exported"
      contains: "api/context.h"
  key_links:
    - from: "CMakeLists.txt"
      to: "src/mcpp/api/context.h"
      via: "MCPP_PUBLIC_HEADERS"
      pattern: "api/context.h"
---

<objective>
Export api/context.h in CMakeLists.txt to complete Phase 6 high-level API.

Purpose: The api/context.h file exists with a complete implementation (354 lines) providing RequestContext and NotificationContext templates with thread-safe property access and Logger::Span integration. However, it was omitted from CMakeLists.txt during plan 06-05, making it inaccessible to library consumers.

Output: CMakeLists.txt updated with src/mcpp/api/context.h in MCPP_PUBLIC_HEADERS list.
</objective>

<execution_context>
@/home/kotdath/.claude/get-shit-done/workflows/execute-plan.md
@/home/kotdath/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-high-level-api/06-VERIFICATION.md
@.planning/phases/06-high-level-api/06-01-SUMMARY.md
@.planning/phases/06-high-level-api/06-02-SUMMARY.md
@.planning/phases/06-high-level-api/06-03-SUMMARY.md
@.planning/phases/06-high-level-api/06-04-SUMMARY.md
@.planning/phases/06-high-level-api/06-05-SUMMARY.md
@src/mcpp/api/context.h
@CMakeLists.txt
</context>

<tasks>

<task type="auto">
  <name>Add api/context.h to CMakeLists.txt MCPP_PUBLIC_HEADERS</name>
  <files>CMakeLists.txt</files>
  <action>
Update CMakeLists.txt:

1. Locate the API headers section in MCPP_PUBLIC_HEADERS (lines 34-38):
   ```
   # API headers (Phase 6: High-Level API)
   src/mcpp/api/peer.h
   src/mcpp/api/role.h
   src/mcpp/api/running_service.h
   src/mcpp/api/service.h
   ```

2. Add src/mcpp/api/context.h after src/mcpp/api/role.h to maintain alphabetical ordering:
   ```
   # API headers (Phase 6: High-Level API)
   src/mcpp/api/context.h
   src/mcpp/api/peer.h
   src/mcpp/api/role.h
   src/mcpp/api/running_service.h
   src/mcpp/api/service.h
   ```

3. Verify the header exists at src/mcpp/api/context.h (354 lines, RequestContext/NotificationContext templates)

Gap reason from VERIFICATION.md: "CMakeLists.txt was updated with most Phase 6 headers but context.h was omitted"
  </action>
  <verify>
grep -q "src/mcpp/api/context.h" CMakeLists.txt && \
grep -A1 "# API headers" CMakeLists.txt | grep -q "context.h"
  </verify>
  <done>
Library consumers can now include #include <mcpp/api/context.h> and the header is installed with other public headers.
  </done>
</task>

</tasks>

<verification>
1. grep confirms src/mcpp/api/context.h in MCPP_PUBLIC_HEADERS
2. API headers section maintains alphabetical ordering (context.h, peer.h, role.h, running_service.h, service.h)
3. No duplicate entries in MCPP_PUBLIC_HEADERS
</verification>

<success_criteria>
1. api/context.h appears in CMakeLists.txt MCPP_PUBLIC_HEADERS list
2. Header is in alphabetical order within API headers section
3. Library consumers can include the header after installation
</success_criteria>

<output>
After completion, create `.planning/phases/06-high-level-api/06-06-SUMMARY.md` with:
- Gap closed: api/context.h now exported in CMakeLists.txt
- Truth now achievable: "Library consumer can use high-level wrapper APIs with type-safe interfaces"
- Files modified: CMakeLists.txt (added api/context.h to MCPP_PUBLIC_HEADERS)
</output>
